<div class="auth-page">
    <div class="auth-page-content">
        <div class="auth-page-content-logo-container">
            <ww-alert
                [alertType]="AlertType.Danger"
                title="Server error."
                subtitle="Unable to establish a connection with the server"
                [@authErrorAnimation]="connectionErrorState"
            />
            <img
                class="auth-page-content-logo"
                ngSrc="/images/logos/logo.svg"
                alt="WinterWay logo"
                width="256"
                height="256"
                priority
                [@authLogoAnimation]="loadingState"
            >
        </div>
        <div
            [@authFormAnimation]="formState"
        >
            <ng-container *ngTemplateOutlet="loadedBlockRef"></ng-container>
        </div>
    </div>

    <ng-template #loginFormBlock>
        <div
            class="auth-page-form"
        >
            <h1>Winter Way</h1>
            <form [formGroup]="loginForm">
                <div class="auth-page-form-input">
                    <ww-input
                        id="login-input"
                        label="Username"
                        formControlName="Username"
                        [(model)]="login"
                    />
                </div>
                <div class="auth-page-form-input">
                    <ww-input
                        id="pass-input"
                        type="password"
                        label="Password"
                        formControlName="Password"
                        [(model)]="password"
                    />
                </div>
            </form>
            <div class="auth-page-form-info">
                <div class="auth-page-form-info-preloader">
                    <ww-preloader
                        [@authPreloaderAnimation]="preloaderState"
                    />
                </div>
                <ww-alert
                    class="login-form-error"
                    [alertType]="AlertType.Danger"
                    [subtitle]="errorMessage"
                    [@authErrorAnimation]="requestErrorState"
                />
            </div>
            <div class="auth-page-button-main">
                <ww-button
                    label="Login"
                    [size]="ButtonSize.Large"
                    [type]="ButtonType.Primary"
                    [disabled]="isLoading"
                    (clicked)="LoginClick()"
                />
            </div>
            <div class="auth-page-button-additional">
                <ww-button
                    label="Register"
                    [size]="ButtonSize.Small"
                    [type]="ButtonType.Primary"
                    [disabled]="isLoading"
                    (clicked)="loadBlock(registerFormBlock)"
                />
                <ww-button
                    label="Import data"
                    [size]="ButtonSize.Small"
                    [type]="ButtonType.Primary"
                    [disabled]="isLoading"
                    (clicked)="loadBlock(importFormBlock)"
                />
            </div>
        </div>
    </ng-template>
    <ng-template #registerFormBlock>
        <div
            class="auth-page-form"
        >
            <h1>Registration</h1>
            <div class="auth-page-form-input">
                <ww-input
                    id="login-reg"
                    label="Username"
                    [(model)]="login"
                />
            </div>
            <div class="auth-page-form-input">
                <ww-input
                    id="pass-reg"
                    type="password"
                    label="Password"
                    [(model)]="password"
                />
            </div>
            <div class="auth-page-form-input">
                <ww-input
                    id="pass-again-reg"
                    type="password"
                    label="Repeat password"
                    [(model)]="password"
                />
            </div>
            <div class="auth-page-form-info">
                <div class="auth-page-form-info-preloader">
                    <ww-preloader
                        [@authPreloaderAnimation]="preloaderState"
                    />
                </div>
                <ww-alert
                    class="login-form-error"
                    [alertType]="AlertType.Danger"
                    [subtitle]="errorMessage"
                    [@authErrorAnimation]="requestErrorState"
                />
            </div>
            <div class="auth-page-button-main">
                <ww-button
                    label="Create account"
                    [size]="ButtonSize.Large"
                    [type]="ButtonType.Primary"
                    [disabled]="isLoading"
                    (clicked)="RegistrationClick()"
                />
            </div>
            <div class="auth-page-button-back">
                <ww-button
                    label="Go back"
                    [size]="ButtonSize.Small"
                    [type]="ButtonType.Primary"
                    [disabled]="isLoading"
                    (clicked)="loadBlock(loginFormBlock)"
                />
            </div>
        </div>
    </ng-template>
    <ng-template #importFormBlock>
        <div
            class="auth-page-form"
        >
            <h1>Import data</h1>
            <div class="auth-page-form-input">
                <ww-textarea
                    label="Data JSON"
                    id="import-textarea"
                    [size]="6"
                    [(model)]="password"
                />
            </div>
            <div class="auth-page-form-info">
                <div class="auth-page-form-info-preloader">
                    <ww-preloader
                        [@authPreloaderAnimation]="preloaderState"
                    />
                </div>
                <ww-alert
                    class="login-form-error"
                    [alertType]="AlertType.Danger"
                    [subtitle]="errorMessage"
                    [@authErrorAnimation]="requestErrorState"
                />
            </div>
            <div class="auth-page-button-main">
                <ww-button
                    label="Import"
                    [size]="ButtonSize.Large"
                    [type]="ButtonType.Primary"
                    [disabled]="isLoading"
                    (clicked)="ImportClick()"
                />
            </div>
            <div class="auth-page-button-back">
                <ww-button
                    label="Go back"
                    [size]="ButtonSize.Small"
                    [type]="ButtonType.Primary"
                    [disabled]="isLoading"
                    (clicked)="loadBlock(loginFormBlock)"
                />
            </div>
        </div>
    </ng-template>
</div>
